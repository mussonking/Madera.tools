# MADERA MCP - FILE STRUCTURE
# Directory layout and key files

---

# ROOT STRUCTURE

root:
  madera/: "Main Python package"
  tests/: "Pytest tests"
  e2e-tests/: "Playwright E2E tests"
  alembic/: "Database migrations"
  .claude/: "LLM context files"

config_files:
  pyproject.toml: "Python project config"
  docker-compose.yml: "Docker services"
  .env: "Environment variables (not in git)"
  .env.example: "Environment template"
  pytest.ini: "Pytest config"
  alembic.ini: "Alembic config"

---

# MADERA PACKAGE

madera/:
  __init__.py: "Package init"
  config.py: "Pydantic Settings"
  database.py: "AsyncPG + SQLAlchemy"

  mcp/:
    __init__.py: ""
    server.py: "FastMCP entry point"
    registry.py: "Tool auto-discovery"
    categories.py: "Tool categories enum"
    tools/:
      __init__.py: ""
      base.py: "BaseTool + ToolResult"
      hints/: "7 document analysis tools"
      pdf/: "5 PDF manipulation tools"
      text/: "4 text extraction tools"
      normalization/: "6 data cleaning tools"
      financial/: "5 mortgage calculation tools"
      validation/: "5 data validation tools"
      advanced/: "8 advanced PDF tools"
      visual/: "34 browser automation tools"

  storage/:
    __init__.py: ""
    minio_client.py: "MinIO operations"

  web/:
    __init__.py: ""
    app.py: "FastAPI app"
    routes/:
      api.py: "API endpoints"
      dashboard.py: "Dashboard routes"
      training.py: "Training UI routes"
      settings.py: "Settings routes"
    templates/: "Jinja2 templates"
    static/:
      css/: "Stylesheets"
      js/: "JavaScript files"

  training/:
    __init__.py: ""
    bot.py: "Training bot"
    agents/:
      claude_agent.py: "Anthropic agent"
      gemini_agent.py: "Google agent"
      openai_agent.py: "OpenAI agent"

  core/:
    __init__.py: ""
    vision.py: "Vision processing"

  tasks/:
    __init__.py: "Celery tasks"

---

# TOOLS DIRECTORY STRUCTURE

tools_by_category:
  hints/:
    blank_page_detector.py: "detect_blank_pages"
    id_card_detector.py: "detect_id_card_sides"
    cra_doc_detector.py: "identify_cra_document_type"
    tax_form_detector.py: "detect_tax_form_type"
    document_splitter.py: "detect_document_boundaries"
    fiscal_year_detector.py: "detect_fiscal_year"
    quality_assessor.py: "assess_image_quality"

  pdf/:
    count_pages.py: "count_pages"
    extract_page.py: "extract_page"
    split_pdf.py: "split_pdf"
    merge_pdfs.py: "merge_pdfs"
    rotate_page.py: "rotate_page"

  text/:
    extract_text.py: "extract_text"
    extract_text_by_page.py: "extract_text_by_page"
    search_text.py: "search_text"
    extract_tables.py: "extract_tables"

  normalization/:
    normalize_address.py: "normalize_address"
    parse_currency.py: "parse_currency"
    parse_date.py: "parse_date"
    normalize_name.py: "normalize_name"
    split_full_name.py: "split_full_name"
    calculate_address_similarity.py: "calculate_address_similarity"

  financial/:
    calculate_annual_income.py: "calculate_annual_income"
    calculate_gds_tds.py: "calculate_gds_tds"
    calculate_ltv.py: "calculate_ltv"
    average_t4_income.py: "average_t4_income"
    estimate_monthly_payment.py: "estimate_monthly_payment"

  validation/:
    validate_sin.py: "validate_sin"
    validate_postal_code.py: "validate_postal_code"
    validate_phone.py: "validate_phone"
    validate_email.py: "validate_email"
    validate_date_range.py: "validate_date_range"

  advanced/:
    generate_thumbnail.py: "generate_thumbnail"
    detect_bank_statement_type.py: "detect_bank_statement_type"
    detect_form_fields.py: "detect_form_fields"
    count_signatures.py: "count_signatures"
    extract_urls.py: "extract_urls"
    compress_pdf.py: "compress_pdf"
    pdf_to_images.py: "pdf_to_images"
    images_to_pdf.py: "images_to_pdf"

  visual/:
    screenshot.py: "Core visual tools (navigate, screenshot, click, etc.)"
    console_capture.py: "Console logging tools"
    network_monitor.py: "Network monitoring tools"
    visual_helpers.py: "Element helpers and wait tools"
    report_builder.py: "Report generation tools"

---

# KEY FILES BY PURPOSE

entry_points:
  mcp_server: "madera/mcp/server.py"
  web_app: "madera/web/app.py"
  celery: "madera/tasks/__init__.py"

configuration:
  settings: "madera/config.py"
  env: ".env"
  docker: "docker-compose.yml"

database:
  models: "madera/database.py"
  migrations: "alembic/versions/"

storage:
  minio: "madera/storage/minio_client.py"

---

# METADATA

purpose: "File structure reference"
update: "On structure changes"

# END
